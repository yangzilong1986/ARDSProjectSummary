# 对于ARDS患者生理数据的异常值处理和插值处理

## 异常值整体概况
* 通过ARDSoutValue/datapre.ipynb 文件，进行了一些数据异常值和缺失值的相关工作，对数据有了一个整体的把握和了解，
* 本项目的首要目的就是对异常值进行处理

## 异常值处理思路
* 文件名：outValuePre.py
* 创建日期：2018.05.10
---
### 1、Pao2
通过分析我们发现（具体分析过程见datapre.ipynb），有很多PaO2小于10 ，大的超过1000多，所以我们将PaO2的范围设置为30-600，超过这个范围的全部设为NaN。后续再进行插值处理。

---
### 2、Spo2
血氧饱和度小于50一般设备都很难检测到了，但是我们提取的数据，还是有一少部分SpO2小于10 ，所以我们将SpO2<50认定为异常值。

---
### 3、HR
30<HR<200

---
### 4、体温
Temp<30 认为是异常值

---
### 5、对于血压的处理方式
* 血压异常值处理：在前面的而分析中我们知道，血压分为三种，依次关系为<br>
  _**收缩压>平均压>舒张压**_<br>
* 利用这个关系对异常值进行处理，只要不满足这个关系的，我们将这些观测值的血压全部设为NULL
  ，后面再利用插值对这些NULL进行插补，这样一方面处理了异常值，同时也没有造成信息的丢失，
  后面呼吸压力相关的参数也是用类似的方法进行处理。
* 有创血压使用同样的方法进行处理

* **`异常血压值出现的原因有可能是匹配的问题，在血气分析时刻，由于血压数据缺失，需要寻找此时刻前4小时的数据，这样
就有可能造成异常值的出现`**
---
### 6、对于呼吸机气道压力的处理方式
呼吸机压力四种参数的关系：<br>
pip>plap>map>peep<br>
与血压处理方式一致。
---
### 7、年龄和身高等基本信息
年龄大于300岁的，按照MIMIC-III的建议，将其设置为91.4，（这是去隐私化的结果）
其他明显存在异常值的，可根据情况进行处理。

---
## 缺失值处理
使用两种方式对缺失值进行处理：随机森林处理缺失值，平均值

对于nbps、nbpm、nbpd、pip、plap、tv我们均使用随机森林进行预测缺失值；<br>
使用fillna 中的pad bfill 两个函数，处理了全局缺失的情况<br>
使用均值，对剩余的缺失值进行处理